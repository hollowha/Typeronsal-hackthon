# typersonal FastAPI æœåŠ¡

è¿™æ˜¯ä¸€ä¸ªåŸºäº FastAPI çš„ AI å­—ä½“ç”ŸæˆæœåŠ¡ï¼Œé›†æˆäº† typersonal æ¨¡å‹ã€‚

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### æ–¹æ³• 1: ä½¿ç”¨æœ€ç»ˆå¯åŠ¨è„šæœ¬ (å¼ºçƒˆæ¨è)
```bash
# Windows æ‰¹å¤„ç†æ–‡ä»¶
start_final.bat

# PowerShell è„šæœ¬
.\start_final.ps1
```

### æ–¹æ³• 2: ä½¿ç”¨åŸºç¡€å¯åŠ¨è„šæœ¬
```bash
# Windows æ‰¹å¤„ç†æ–‡ä»¶
start_server.bat

# PowerShell è„šæœ¬
.\start_server.ps1
```

### æ–¹æ³• 3: æ‰‹åŠ¨å¯åŠ¨
```bash
# æ¿€æ´»ç¯å¢ƒ
conda activate typersonal

# å¯åŠ¨æœåŠ¡å™¨
uvicorn main:app --host 0.0.0.0 --port 8000 --reload
```

## ğŸ“‹ ç¯å¢ƒæ£€æŸ¥

åœ¨å¯åŠ¨æœåŠ¡ä¹‹å‰ï¼Œå»ºè®®å…ˆæ£€æŸ¥ç¯å¢ƒé…ç½®ï¼š

```bash
# ä½¿ç”¨ typersonal ç¯å¢ƒä¸­çš„ Python
C:\Users\HackathonUser\miniconda3\envs\typersonal\python.exe check_environment.py
```

## ğŸŒ æœåŠ¡ç«¯ç‚¹

å¯åŠ¨æˆåŠŸåï¼ŒæœåŠ¡å°†åœ¨ä»¥ä¸‹åœ°å€è¿è¡Œï¼š

- **ä¸»æœåŠ¡**: http://localhost:8000
- **API æ–‡æ¡£**: http://localhost:8000/docs
- **äº¤äº’å¼æ–‡æ¡£**: http://localhost:8000/redoc

### ä¸»è¦ API ç«¯ç‚¹

#### 1. æ ¹è·¯å¾„
- `GET /` - æœåŠ¡çŠ¶æ€æ£€æŸ¥
- `GET /users` - è·å–ç”¨æˆ·åˆ—è¡¨
- `POST /users` - åˆ›å»ºæ–°ç”¨æˆ·

#### 2. AI ç”Ÿæˆç«¯ç‚¹
- `POST /8000/ai/generate` - ç”Ÿæˆå­—ä½“å›¾åƒ
  - å‚æ•°: `character` (å­—ç¬¦), `sampling_step` (é‡‡æ ·æ­¥æ•°), `reference_image` (å‚è€ƒå›¾åƒ)
  
- `POST /8000/ai/blend` - æ··åˆå­—ä½“é£æ ¼
  - å‚æ•°: `character` (å­—ç¬¦), `style_option` (é£æ ¼é€‰é¡¹), `alpha` (é€æ˜åº¦), `thickness` (ç²—ç»†), `image_a` (å›¾åƒ)

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒè¦æ±‚
- Python 3.10.18
- PyTorch 2.2.2 (CPU ç‰ˆæœ¬)
- FastAPI 0.99.1
- Uvicorn 0.34.0

### ä¾èµ–åŒ…
æ‰€æœ‰ä¾èµ–åŒ…å·²åœ¨ `requirements_fastapi_ai.txt` ä¸­æŒ‡å®šï¼Œå¹¶å·²å®‰è£…åœ¨ `typersonal` ç¯å¢ƒä¸­ã€‚

### æ¨¡å‹è·¯å¾„
æœåŠ¡ä¼šè‡ªåŠ¨æŸ¥æ‰¾ `../typersonal` ç›®å½•ä¸­çš„æ¨¡å‹æ–‡ä»¶ã€‚

## ğŸ“ æ–‡ä»¶ç»“æ„

```
fastapi/
â”œâ”€â”€ main.py                 # FastAPI ä¸»åº”ç”¨
â”œâ”€â”€ ai_router.py           # AI ç›¸å…³è·¯ç”±
â”œâ”€â”€ db/                    # æ•°æ®åº“ç›¸å…³
â”œâ”€â”€ start_server.bat       # Windows å¯åŠ¨è„šæœ¬
â”œâ”€â”€ start_server.ps1       # PowerShell å¯åŠ¨è„šæœ¬
â”œâ”€â”€ check_environment.py   # ç¯å¢ƒæ£€æŸ¥è„šæœ¬
â”œâ”€â”€ requirements_fastapi_ai.txt  # ä¾èµ–åŒ…åˆ—è¡¨
â””â”€â”€ README.md              # æœ¬æ–‡ä»¶
```

## ğŸ§ª æµ‹è¯• API

### ä½¿ç”¨æµ‹è¯•è„šæœ¬ (æ¨è)
```bash
# ä½¿ç”¨ typersonal ç¯å¢ƒä¸­çš„ Python
C:\Users\HackathonUser\miniconda3\envs\typersonal\python.exe test_api.py
```

### ä½¿ç”¨ curl æµ‹è¯•

#### æµ‹è¯•æœåŠ¡çŠ¶æ€
```bash
curl http://localhost:8000/
```

#### æµ‹è¯•ç”¨æˆ·åˆ—è¡¨
```bash
curl http://localhost:8000/users
```

### ä½¿ç”¨ Python æµ‹è¯•

```python
import requests

# æµ‹è¯•æœåŠ¡çŠ¶æ€
response = requests.get("http://localhost:8000/")
print(response.json())

# æµ‹è¯•ç”¨æˆ·åˆ—è¡¨
response = requests.get("http://localhost:8000/users")
print(response.json())
```

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ç¯å¢ƒæ¿€æ´»å¤±è´¥**
   - ç¡®ä¿å·²å®‰è£… conda
   - æ£€æŸ¥ `typersonal` ç¯å¢ƒæ˜¯å¦å­˜åœ¨
   - è¿è¡Œ `conda env list` æŸ¥çœ‹ç¯å¢ƒ

2. **æ¨¡å—å¯¼å…¥é”™è¯¯**
   - æ£€æŸ¥ `../typersonal` ç›®å½•æ˜¯å¦å­˜åœ¨
   - ç¡®ä¿ typersonal ç¯å¢ƒä¸­çš„åŒ…å·²æ­£ç¡®å®‰è£…
   - è¿è¡Œ `check_environment.py` æ£€æŸ¥ä¾èµ–

3. **ç«¯å£å ç”¨**
   - æ£€æŸ¥ 8000 ç«¯å£æ˜¯å¦è¢«å ç”¨
   - ä½¿ç”¨ `netstat -an | findstr 8000` æ£€æŸ¥
   - ä¿®æ”¹å¯åŠ¨è„šæœ¬ä¸­çš„ç«¯å£å·

4. **æ¨¡å‹åŠ è½½å¤±è´¥**
   - æ£€æŸ¥ typersonal ç›®å½•ä¸­çš„æ¨¡å‹æ–‡ä»¶
   - ç¡®ä¿æ¨¡å‹æ–‡ä»¶è·¯å¾„æ­£ç¡®
   - æ£€æŸ¥æ¨¡å‹æ–‡ä»¶æ˜¯å¦å®Œæ•´

### æ—¥å¿—æŸ¥çœ‹

å¯åŠ¨æœåŠ¡åï¼Œæ§åˆ¶å°ä¼šæ˜¾ç¤ºè¯¦ç»†çš„æ—¥å¿—ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š
- è¯·æ±‚å¤„ç†çŠ¶æ€
- å›¾åƒå¤„ç†è¿‡ç¨‹
- é”™è¯¯ä¿¡æ¯

## ğŸ”„ å¼€å‘æ¨¡å¼

æœåŠ¡é»˜è®¤ä»¥å¼€å‘æ¨¡å¼è¿è¡Œï¼Œæ”¯æŒï¼š
- è‡ªåŠ¨é‡è½½ä»£ç æ›´æ”¹
- è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
- çƒ­é‡è½½

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

ç”±äºä½¿ç”¨ CPU ç‰ˆæœ¬çš„ PyTorchï¼š
- æ¨ç†é€Ÿåº¦é€‚ä¸­
- é€‚åˆä¸­å°å‹æ¨¡å‹
- å»ºè®®ä½¿ç”¨è¾ƒå°çš„å›¾åƒå°ºå¯¸

## ğŸ¤ è´¡çŒ®

å¦‚éœ€ä¿®æ”¹æˆ–æ‰©å±•åŠŸèƒ½ï¼š
1. ä¿®æ”¹ç›¸åº”çš„ Python æ–‡ä»¶
2. æœåŠ¡ä¼šè‡ªåŠ¨é‡è½½
3. æµ‹è¯•æ–°åŠŸèƒ½
4. æäº¤æ›´æ”¹

---

**æœåŠ¡å¯åŠ¨åï¼Œå¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—® http://localhost:8000/docs æŸ¥çœ‹å®Œæ•´çš„ API æ–‡æ¡£ï¼** ğŸ‰
